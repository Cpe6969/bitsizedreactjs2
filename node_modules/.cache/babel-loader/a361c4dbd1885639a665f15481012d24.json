{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Button,Row,Col,ListGroup,Image,Card}from'react-bootstrap';import{Link}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import Message from'../components/Message';import CheckoutSteps from'../components/CheckoutSteps';import{createOrder}from'../actions/orderActions';import{ORDER_CREATE_RESET}from'../constants/orderConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PlaceOrderScreen(_ref){var history=_ref.history;var orderCreate=useSelector(function(state){return state.orderCreate;});var order=orderCreate.order,error=orderCreate.error,success=orderCreate.success;var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});cart.itemsPrice=cart.cartItems.reduce(function(acc,item){return acc+item.price*item.qty;},0).toFixed(2);cart.shippingPrice=(cart.itemsPrice>100?0:10).toFixed(2);cart.taxPrice=Number(0.082*cart.itemsPrice).toFixed(2);cart.totalPrice=(Number(cart.itemsPrice)+Number(cart.taxPrice)).toFixed(2);if(!cart.paymentMethod){history.push('/payment');}useEffect(function(){if(success){history.push(\"/order/\".concat(order._id));dispatch({type:ORDER_CREATE_RESET});}},[success,history]);var placeOrder=function placeOrder(){dispatch(createOrder({orderItems:[cart.cartItems[0]],// Only pass the first item in the array\nshippingAddress:cart.shippingAddress,paymentMethod:cart.paymentMethod,itemsPrice:cart.itemsPrice,shippingPrice:cart.shippingPrice,taxPrice:cart.taxPrice,totalPrice:cart.totalPrice}));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CheckoutSteps,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{className:\"text-center\",children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Premium Purchase\"})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Premium:\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",cart.itemsPrice]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Tax:\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",cart.taxPrice]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Total:\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",cart.totalPrice]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block\",disabled:cart.cartItems.length===0,onClick:placeOrder,children:\"Buy\"})})]})})})})]});}export default PlaceOrderScreen;","map":{"version":3,"names":["React","useState","useEffect","Button","Row","Col","ListGroup","Image","Card","Link","useDispatch","useSelector","Message","CheckoutSteps","createOrder","ORDER_CREATE_RESET","jsx","_jsx","jsxs","_jsxs","PlaceOrderScreen","_ref","history","orderCreate","state","order","error","success","dispatch","cart","itemsPrice","cartItems","reduce","acc","item","price","qty","toFixed","shippingPrice","taxPrice","Number","totalPrice","paymentMethod","push","concat","_id","type","placeOrder","orderItems","shippingAddress","children","step1","step2","step3","step4","className","variant","Item","disabled","length","onClick"],"sources":["C:/Users/franc/Downloads/BITE-SIZED/frontend/src/screens/PlaceOrderScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Button, Row, Col, ListGroup, Image, Card } from 'react-bootstrap'\nimport { Link } from 'react-router-dom'\nimport { useDispatch, useSelector } from 'react-redux'\nimport Message from '../components/Message'\nimport CheckoutSteps from '../components/CheckoutSteps'\nimport { createOrder } from '../actions/orderActions'\nimport { ORDER_CREATE_RESET } from '../constants/orderConstants'\n\nfunction PlaceOrderScreen({ history }) {\n\n    const orderCreate = useSelector(state => state.orderCreate)\n    const { order, error, success } = orderCreate\n\n    const dispatch = useDispatch()\n\n    const cart = useSelector(state => state.cart)\n\n    cart.itemsPrice = cart.cartItems.reduce((acc, item) => acc + item.price * item.qty, 0).toFixed(2)\n    cart.shippingPrice = (cart.itemsPrice > 100 ? 0 : 10).toFixed(2)\n    cart.taxPrice = Number((0.082) * cart.itemsPrice).toFixed(2)\n\n    cart.totalPrice = (Number(cart.itemsPrice) + Number(cart.taxPrice)).toFixed(2)\n\n\n    if (!cart.paymentMethod) {\n        history.push('/payment')\n    }\n\n    useEffect(() => {\n        if (success) {\n            history.push(`/order/${order._id}`)\n            dispatch({ type: ORDER_CREATE_RESET })\n        }\n    }, [success, history])\n\n    const placeOrder = () => {\n        dispatch(createOrder({\n            orderItems: [cart.cartItems[0]], // Only pass the first item in the array\n            shippingAddress: cart.shippingAddress,\n            paymentMethod: cart.paymentMethod,\n            itemsPrice: cart.itemsPrice,\n            shippingPrice: cart.shippingPrice,\n            taxPrice: cart.taxPrice,\n            totalPrice: cart.totalPrice,\n        }))\n    }\n\n    return (\n        <div>\n            <CheckoutSteps step1 step2 step3 step4 />\n            <Row>\n              \n\n<Col className='text-center'>\n                <Card>\n                    <ListGroup variant='flush'>\n                        <ListGroup.Item>\n                            <h2>Premium Purchase</h2>\n                        </ListGroup.Item>\n\n                        <ListGroup.Item>\n                            <Row>\n                                <Col>Premium:</Col>\n                                <Col>${cart.itemsPrice}</Col>\n                            </Row>\n                        </ListGroup.Item>\n\n                        {/* <ListGroup.Item>\n                            <Row>\n                                <Col>Shipping:</Col>\n                                <Col>${cart.shippingPrice}</Col>\n                            </Row>\n                        </ListGroup.Item> */}\n\n                        <ListGroup.Item>\n                            <Row>\n                                <Col>Tax:</Col>\n                                <Col>${cart.taxPrice}</Col>\n                            </Row>\n                        </ListGroup.Item>\n\n                        <ListGroup.Item>\n                            <Row>\n                                <Col>Total:</Col>\n                                <Col>${cart.totalPrice}</Col>\n                            </Row>\n                        </ListGroup.Item>\n\n                        <ListGroup.Item>\n                            {error && <Message variant='danger'>{error}</Message>}\n                        </ListGroup.Item>\n\n                        <ListGroup.Item>\n                            <Button\n                                type='button'\n                                className='btn-block'\n                                disabled={cart.cartItems.length === 0}\n                                onClick={placeOrder}\n                            >\n                                Buy\n                            </Button>\n                        </ListGroup.Item>\n                    </ListGroup>\n                </Card>\n            </Col>\n        </Row>\n    </div>\n)\n}\n\nexport default PlaceOrderScreen\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}