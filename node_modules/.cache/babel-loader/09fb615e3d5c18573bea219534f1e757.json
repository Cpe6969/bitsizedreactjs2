{"ast":null,"code":"import { ADD_MESSAGE } from '../constants/chatboxConstants';\nexport const addMessage = (text, receiver) => (dispatch, getState) => {\n  const userInfo = getState().userLogin.userInfo;\n  const sender = userInfo ? userInfo.id : null;\n\n  // Check if sender and receiver are friends or the same user\n  const friends = getState().friendsList.friends;\n  const isFriend = friends.some(friend => friend._id === receiver && friend.user === sender);\n  const isUser = sender === receiver;\n  if (isFriend || isUser) {\n    const name = userInfo ? userInfo.name : 'Anonymous';\n    dispatch({\n      type: ADD_MESSAGE,\n      payload: {\n        name,\n        text,\n        sender,\n        receiver\n      }\n    });\n  }\n};","map":{"version":3,"names":["ADD_MESSAGE","addMessage","text","receiver","dispatch","getState","userInfo","userLogin","sender","id","friends","friendsList","isFriend","some","friend","_id","user","isUser","name","type","payload"],"sources":["C:/Users/franc/Downloads/W.A.S.D(Finish Project)/frontend/src/actions/chatboxActions.js"],"sourcesContent":["\r\nimport { ADD_MESSAGE } from '../constants/chatboxConstants';\r\n\r\nexport const addMessage = (text, receiver) => (dispatch, getState) => {\r\n  const userInfo = getState().userLogin.userInfo;\r\n  const sender = userInfo ? userInfo.id : null;\r\n  \r\n  // Check if sender and receiver are friends or the same user\r\n  const friends = getState().friendsList.friends;\r\n  const isFriend = friends.some(friend => friend._id === receiver && friend.user === sender);\r\n  const isUser = sender === receiver;\r\n  \r\n  if (isFriend || isUser) {\r\n    const name = userInfo ? userInfo.name : 'Anonymous';\r\n    dispatch({\r\n      type: ADD_MESSAGE,\r\n      payload: { name, text, sender, receiver }\r\n    });\r\n  }\r\n};"],"mappings":"AACA,SAASA,WAAW,QAAQ,+BAA+B;AAE3D,OAAO,MAAMC,UAAU,GAAGA,CAACC,IAAI,EAAEC,QAAQ,KAAK,CAACC,QAAQ,EAAEC,QAAQ,KAAK;EACpE,MAAMC,QAAQ,GAAGD,QAAQ,EAAE,CAACE,SAAS,CAACD,QAAQ;EAC9C,MAAME,MAAM,GAAGF,QAAQ,GAAGA,QAAQ,CAACG,EAAE,GAAG,IAAI;;EAE5C;EACA,MAAMC,OAAO,GAAGL,QAAQ,EAAE,CAACM,WAAW,CAACD,OAAO;EAC9C,MAAME,QAAQ,GAAGF,OAAO,CAACG,IAAI,CAACC,MAAM,IAAIA,MAAM,CAACC,GAAG,KAAKZ,QAAQ,IAAIW,MAAM,CAACE,IAAI,KAAKR,MAAM,CAAC;EAC1F,MAAMS,MAAM,GAAGT,MAAM,KAAKL,QAAQ;EAElC,IAAIS,QAAQ,IAAIK,MAAM,EAAE;IACtB,MAAMC,IAAI,GAAGZ,QAAQ,GAAGA,QAAQ,CAACY,IAAI,GAAG,WAAW;IACnDd,QAAQ,CAAC;MACPe,IAAI,EAAEnB,WAAW;MACjBoB,OAAO,EAAE;QAAEF,IAAI;QAAEhB,IAAI;QAAEM,MAAM;QAAEL;MAAS;IAC1C,CAAC,CAAC;EACJ;AACF,CAAC"},"metadata":{},"sourceType":"module"}